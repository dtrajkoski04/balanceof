<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My ERC-20 Balance (Holesky)</title>

  <!-- ethers.js UMD build -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.11.1/dist/ethers.umd.min.js"></script>

  <style>
    body { font-family: system-ui, sans-serif; text-align:center; margin:3rem auto; max-width:34rem; }
    button { padding:.7rem 1.5rem; font-size:1rem; cursor:pointer; margin-top:1.2rem; }
    #output { margin-top:1.5rem; font-size:1.2rem; font-weight:600; }
  </style>
</head>
<body>
  <h1>ERC-20 Balance Checker</h1>

  <button id="btn">Connect wallet</button>
  <div id="output">—</div>

  <script>
    /* 1️⃣  Paste your token address here */
    const tokenAddress = "0xYOUR_TOKEN_ADDRESS_HERE";

    /* 2️⃣  Minimal ERC-20 ABI for balanceOf / decimals / symbol */
    const erc20Abi = [
      "function balanceOf(address) view returns (uint256)",
      "function decimals() view returns (uint8)",
      "function symbol() view returns (string)"
    ];

    const btn     = document.getElementById('btn');
    const output  = document.getElementById('output');
    let provider, signer, contract;

    async function connect() {
      if (!window.ethereum) {
        alert("MetaMask (or another injected wallet) is required.");
        return;
      }
      /* Request account access */
      await window.ethereum.request({ method: "eth_requestAccounts" });

      provider = new ethers.BrowserProvider(window.ethereum);
      signer   = await provider.getSigner();

      /* Ensure we’re on Holesky 17000 */
      const { chainId } = await provider.getNetwork();
      if (Number(chainId) !== 17000) {
        alert("Please switch MetaMask to the Holesky testnet (chain ID 17000) and reload.");
        return;
      }

      /* Create contract instance (read-only is fine) */
      contract = new ethers.Contract(tokenAddress, erc20Abi, provider);

      btn.textContent = "Show balance";
    }

    async function showBalance() {
      try {
        if (!contract) await connect();
        const address   = await signer.getAddress();
        const [rawBal, decimals, symbol] = await Promise.all([
          contract.balanceOf(address),
          contract.decimals(),
          contract.symbol()
        ]);

        const human = ethers.formatUnits(rawBal, decimals);
        output.textContent = `Balance: ${human} ${symbol} (address: ${address.slice(0,6)}…${address.slice(-4)})`;
      } catch (err) {
        console.error(err);
        output.textContent = "Error: " + (err.message ?? err);
      }
    }

    btn.addEventListener("click", () => {
      (btn.textContent === "Connect wallet") ? connect() : showBalance();
    });

    /* Auto-connect if the site was already authorised */
    if (window.ethereum && window.ethereum.selectedAddress) {
      connect();
    }
  </script>
</body>
</html>
